# Product Requirements Document (PRD)
# 통계 분석 웹 애플리케이션

## 1. 제품 개요

### 1.1 제품명
**Statistical Analysis WebApp** (통계 분석 도구)

### 1.2 목적
국립수산과학원 연구자들이 인터넷이 차단된 내부망 환경에서 ANOVA 및 사후분석을 포함한 핵심 통계 분석을 쉽게 수행할 수 있는 단일 HTML 파일 기반 웹 애플리케이션

### 1.3 핵심 가치
- **Zero Installation**: 설치 과정 없이 즉시 사용
- **완전한 오프라인 작동**: 인터넷 연결 불필요
- **신뢰성 있는 통계 계산**: Python scipy.stats 기반
- **보안 안전**: 실행 파일이 아닌 순수 HTML 파일

### 1.4 대상 사용자
- **1차**: 국립수산과학원 연구자
  - 수산자원 연구부
  - 양식/병리 연구부
  - 해양환경 연구부
  - 수산물 품질/안전성 연구부
- **2차**: 지역 수산연구소, 대학 수산/해양 연구실
- **3차**: 수협, 양식업체 품질관리팀, 수산 관련 기업 R&D

---

## 2. 기술 아키텍처

### 2.1 기술 스택
- **프론트엔드**: HTML5, CSS3, Vanilla JavaScript
- **계산 엔진**: Pyodide (Python 3.11 in WebAssembly)
- **통계 라이브러리**: scipy.stats (핵심 통계), numpy (행렬 연산), pandas (데이터 처리)
- **시각화**: Chart.js (인라인 번들)
  - Python matplotlib 대신 Chart.js 선택 (성능/파일크기/상호작용성)
  - 통계 계산은 Python, 시각화는 JavaScript로 역할 분담
- **파일 형식**: 단일 HTML 파일

### 2.2 파일 구조
```
통계분석도구.html (약 40-50MB)
├── HTML 구조
├── CSS 스타일 (인라인)
├── JavaScript 코드 (인라인)
├── Pyodide 런타임 (Base64 인코딩)
├── Python 패키지 (Base64 인코딩)
└── 차트 라이브러리 (인라인)
```

### 2.3 시스템 요구사항
- **브라우저**: Chrome 90+, Firefox 88+, Edge 90+, Safari 14+
- **메모리**: 최소 4GB RAM (8GB 권장)
- **저장공간**: 100MB 여유 공간
- **운영체제**: Windows 10+, macOS 10.14+, Ubuntu 20.04+

---

## 3. 핵심 기능

### 3.1 데이터 입력
- **복사-붙여넣기**: Excel/CSV 데이터 직접 붙여넣기
- **파일 업로드**: CSV, TSV, Excel 파일 지원
- **직접 입력**: 테이블 형태의 데이터 입력 UI
- **예제 데이터**: 학습용 샘플 데이터 제공

### 3.2 자동 통계 분석 플로우

#### 3.2.1 데이터 검증
- 결측치 확인 및 처리
- 이상치 탐지 (IQR 방법)
- 데이터 타입 자동 인식

#### 3.2.2 정규성 검정
- **Shapiro-Wilk Test** (n < 50)
- **Kolmogorov-Smirnov Test** (n ≥ 50)
- Q-Q Plot 시각화

#### 3.2.3 등분산성 검정
- **Levene's Test** (기본)
- **Bartlett's Test** (정규분포 가정)
- **F-Test** (2그룹 비교)

#### 3.2.4 통계 검정 자동 선택
```
데이터 입력
    ↓
그룹 수 확인
    ├─ 2그룹
    │   ├─ 정규성 O + 등분산성 O → Independent t-test
    │   ├─ 정규성 O + 등분산성 X → Welch's t-test
    │   └─ 정규성 X → Mann-Whitney U test
    │
    └─ 3그룹 이상
        ├─ 정규성 O + 등분산성 O → One-way ANOVA → 사후분석(Tukey HSD)
        ├─ 정규성 O + 등분산성 X → Welch's ANOVA → 사후분석(Games-Howell)
        └─ 정규성 X → Kruskal-Wallis test → 사후분석(Dunn's test)
```

#### 3.2.5 사후 분석 (Post-hoc)
- **ANOVA 유의미한 경우**:
  - Tukey HSD
  - Bonferroni correction
  - Scheffe's method
- **Kruskal-Wallis 유의미한 경우**:
  - Dunn's test
  - Conover's test

### 3.3 결과 출력

#### 3.3.1 통계 결과
- 기술통계량 (평균, 표준편차, 중앙값 등)
- 검정 통계량 및 p-value
- 효과 크기 (Cohen's d, eta-squared)
- 95% 신뢰구간

#### 3.3.2 시각화
- Box Plot
- Bar Chart with Error Bars
- Distribution Plot (Histogram + KDE)
- Q-Q Plot
- Heatmap (다중 비교)

#### 3.3.3 결과 해석
- 평이한 언어로 결과 설명
- 통계적 유의성 판단 (p < 0.05)
- 실질적 유의성 해석
- 주의사항 및 제한점 명시

### 3.4 데이터 내보내기
- **Excel 파일**: 결과 테이블 + 그래프
- **PDF 리포트**: 전체 분석 보고서
- **CSV**: 원시 데이터 + 결과
- **이미지**: PNG/SVG 그래프

---

## 4. 사용자 인터페이스

### 4.1 UI 구성
```
┌─────────────────────────────────────────┐
│           통계 분석 도구 v1.0           │
├─────────────────────────────────────────┤
│  [데이터 입력] [분석 설정] [결과 확인]  │
├─────────────────────────────────────────┤
│                                         │
│         데이터 입력 영역                │
│    [파일 선택] [붙여넣기] [예제]       │
│                                         │
├─────────────────────────────────────────┤
│         분석 진행 상황                  │
│    ■■■■■■■■□□ 80% 완료                │
├─────────────────────────────────────────┤
│         결과 표시 영역                  │
│    [표] [그래프] [해석] [다운로드]     │
│                                         │
└─────────────────────────────────────────┘
```

### 4.2 디자인 원칙
- **직관성**: 3클릭 이내 모든 기능 접근
- **피드백**: 실시간 진행 상황 표시
- **가이드**: 단계별 도움말 제공
- **반응형**: 다양한 화면 크기 지원

### 4.3 색상 체계
- **Primary**: #2E7D32 (신뢰감 있는 녹색)
- **Secondary**: #1976D2 (전문적인 파란색)
- **Success**: #4CAF50
- **Warning**: #FF9800
- **Error**: #F44336

---

## 5. 구현 계획

### 5.1 개발 단계 (MVP - 4주)

#### Phase 1: 기초 구축 (1주)
- [ ] Pyodide 오프라인 번들 생성 (scipy.stats 포함)
- [ ] 기본 HTML 구조 및 UI 프레임워크
- [ ] 데이터 입력 인터페이스 (복사/붙여넣기, CSV 업로드)

#### Phase 2: 핵심 통계 기능 (1.5주)
- [ ] 기술통계 및 데이터 검증
- [ ] 정규성 검정 (Shapiro-Wilk, Kolmogorov-Smirnov)
- [ ] 등분산성 검정 (Levene, Bartlett)
- [ ] t-test (Independent, Welch's)
- [ ] One-way ANOVA 구현

#### Phase 3: 사후분석 및 고급 기능 (1주)
- [ ] Tukey HSD 사후분석
- [ ] Bonferroni correction
- [ ] Games-Howell (등분산 가정 위배 시)
- [ ] Dunn's test (비모수)
- [ ] 회귀분석 (단순/다중)
- [ ] 상관분석 (Pearson, Spearman)

#### Phase 4: 시각화 및 결과 출력 (0.5주)
- [ ] Box plot with significance markers
- [ ] 평균 ± 95% CI 바차트
- [ ] 사후분석 결과 매트릭스 시각화
- [ ] Excel/PDF 결과 내보내기
- [ ] 한글 결과 해석 생성

### 5.2 향후 확장 계획 (Phase 2 - 추후 개발)

#### 수산과학 특화 기능
- [ ] 성장모델 (von Bertalanffy, Gompertz)
- [ ] CPUE 표준화
- [ ] 시계열 분석 (트렌드, 계절성)
- [ ] GLM (일반선형모델)
- [ ] PCA (주성분분석)

### 5.2 파일 크기 최적화 전략
1. **코드 압축**: Terser, CSS Minifier 사용
2. **패키지 선택적 포함**: 필수 함수만 추출
3. **압축 알고리즘**: Brotli 압축 적용
4. **지연 로딩**: 고급 기능은 필요시 로드

---

## 6. 성능 목표

### 6.1 성능 지표
- **초기 로딩**: < 30초 (첫 실행)
- **데이터 처리**: 10,000행 < 5초
- **통계 계산**: < 2초 (일반적인 경우)
- **파일 크기**: < 50MB

### 6.2 제한사항
- **최대 데이터**: 100,000행 × 50열
- **동시 분석**: 단일 세션
- **브라우저 메모리**: 2GB 제한

---

## 7. 보안 고려사항

### 7.1 보안 특징
- **No Server Communication**: 모든 처리 로컬
- **No External Dependencies**: CDN 사용 안함
- **No Installation**: 시스템 변경 없음
- **No Admin Rights**: 일반 사용자 권한

### 7.2 데이터 보안
- 데이터는 브라우저 메모리에만 존재
- 브라우저 종료 시 자동 삭제
- 로컬 스토리지 미사용
- 쿠키 미사용

---

## 8. 사용자 시나리오

### 8.1 품질관리 담당자 김과장
```
1. 이메일로 "통계분석도구.html" 수신
2. 파일을 바탕화면에 저장
3. 더블클릭으로 실행
4. 엑셀에서 품질 데이터 복사
5. 도구에 붙여넣기
6. "분석 시작" 클릭
7. 자동으로 적절한 통계 방법 선택됨
8. 결과 확인 및 보고서 다운로드
```

### 8.2 연구원 박대리
```
1. USB로 도구 파일 전달받음
2. 실험 데이터 CSV 파일 준비
3. 도구 실행 후 CSV 업로드
4. 정규성, 등분산성 자동 검정
5. ANOVA 및 사후분석 자동 수행
6. 논문용 그래프 PNG 저장
7. 통계 결과표 Excel 다운로드
```

---

## 9. 성공 지표

### 9.1 정량적 지표
- 사용자 만족도: > 4.5/5.0
- 분석 정확도: scipy 대비 99.9% 일치
- 처리 속도: 기존 대비 50% 단축
- 교육 시간: < 30분

### 9.2 정성적 지표
- IT 지원 요청 감소
- 통계 분석 접근성 향상
- 업무 효율성 증대
- 데이터 기반 의사결정 증가

---

## 10. 향후 계획

### 10.1 Version 2.0
- 회귀분석 추가
- 시계열 분석
- 다변량 분석
- 머신러닝 기초

### 10.2 Version 3.0
- 실시간 협업 기능
- 클라우드 저장 옵션
- API 연동
- 플러그인 시스템

---

## 11. 부록

### 11.1 용어 정의
- **Pyodide**: 브라우저에서 Python을 실행하는 WebAssembly 기반 런타임
- **정규성**: 데이터가 정규분포를 따르는 정도
- **등분산성**: 그룹 간 분산이 동일한 정도
- **사후분석**: 다중 비교 시 어느 그룹 간 차이가 있는지 확인

### 11.2 참고 자료
- Pyodide Documentation: https://pyodide.org
- SciPy Statistical Functions: https://docs.scipy.org/doc/scipy/reference/stats.html
- Statistical Testing Flowchart: ISO 13485 Guidelines

---

*문서 버전: 1.0*  
*작성일: 2025-09-02*  
*작성자: Statistical Analysis WebApp Team*